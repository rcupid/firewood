

// let str = { "pageId": 1003733, "pageTitle": "", "componentList": [{ "uid": "745a0912 - 317d - 4a79 - a630 - 9fb061c5eef2", "type": 2, "componentName": "ZybCourse", "status": "0", "componentList": [], "propsData": { "0": { "style": {}, "description": { "skuId": "2045407", "courseType": "big", "isShowNum": true, "skuData": { "sub": "语文", "skuId": 2045407, "ncid": "90d21e56a56a0e10ff3638a07e1b55ed", "spuId": 7356, "spuNcid": "ad1b1495795c6212bbbcc4283a17610d", "skuName": "班课test", "courseTypeDesc": "专题课", "saleCnt": 0, "skuPrice": 10, "skuOriginalPrice": 1100, "grade": null, "subject": "语文", "teacherUid": null, "teacherName": null, "teacherAvatar": null, "teacherHalfAvatar330": null, "teacherCharacter": [], "startTime": null, "stopTime": null, "date": "01月01日 - 01月01日", "time": "08: 00: 00 - 08: 00: 00" }, "skuName": "班课test" }, "actions": [{ "actionType": "dotEvent", "config": [{ "type": "SetTextArea", "label": "埋点名称", "name": "dot", "placeholderName": "dotPlaceholder", "maxLength": 200, "padding": "0px 15px 18px 16px" }], "id": "uy0", "dotPlaceholder": "点击课程uy0" }] } }, "menuName": "课程" }, { "uid": "b1940048 - d672 - 4c19 - 8756 - b3e12bb9b7ee", "type": 2, "componentName": "ZybCourse", "status": "0", "componentList": [], "propsData": { "0": { "style": {}, "description": { "skuId": "2043907", "courseType": "big", "isShowNum": true, "skuData": { "sub": "数学", "skuId": 2043907, "ncid": "1b752b6aa2d02d563101fa00a7a8280f", "spuId": 54874, "spuNcid": "6f8b6c1fb2c4fad4ac5cebf42e222d10", "skuName": "【2019暑】初一数学提升班（全国人教版）", "courseTypeDesc": "专题课", "saleCnt": 0, "skuPrice": 10, "skuOriginalPrice": 10, "grade": "初一", "subject": "数学", "teacherUid": 2324420316, "teacherName": null, "teacherAvatar": false, "teacherHalfAvatar330": "", "teacherCharacter": [], "startTime": 1563067800, "stopTime": 1563680700, "date": "07月14日 - 07月21日", "time": "09: 30: 00 - 11: 45: 00" }, "skuName": "【2019暑】初一数学提升班（全国人教版）" }, "actions": [{ "actionType": "dotEvent", "config": [{ "type": "SetTextArea", "label": "埋点名称", "name": "dot", "placeholderName": "dotPlaceholder", "maxLength": 200, "padding": "0px 15px 18px 16px" }], "id": "as0", "dotPlaceholder": "点击课程as0" }] } }, "menuName": "课程" }, { "uid": "f3bb4e11 - 8217 - 4334 - 8fe8 - 7182bf95b169", "type": 2, "componentName": "ZybButton", "status": "0", "componentList": [], "propsData": { "0": { "style": {}, "description": { "text": "立即报名", "textColor": "#ffffff", "bgColor": "#FA5A09", "borderRadius": 40, "border": { "size": 0, "color": "" }, "fontStyle": [], "fontSize": 40, "shadowColor": "", "hboxshadow": 0, "vboxshadow": 0, "blur": 0, "spread": 0 }, "actions": [{ "id": "sm0", "dotPlaceholder": "点击按钮sm0", "actionType": "link", "params": { "linkType": "jumpOrder", "linkValue": "2043906" }, "dot": "", "extend": { "text": "【2019暑】初一数学提升班（全国人教版）" } }] } }, "menuName": "按钮" }, { "uid": "ebcc63d1 - 8061 - 4fb6 - ac7b - 85692220e967", "type": 2, "componentName": "ZybText", "status": "0", "componentList": [], "propsData": { "0": { "style": {}, "description": { "text": "我是一个普通文字组件，这是示意文字内容。我是一个普通文字组件，这是示意文字内容。", "fontSize": 28, "fontStyle": [], "textAlign": "left", "color": "#333333", "backgroundColor": "", "lineHeight": 2, "letterSpace": 1, "marginX": 0, "marginY": 50 }, "actions": [{ "id": "hd0", "dotPlaceholder": "点击文本hd0" }] } }, "menuName": "文本" }], "status": 0, "globalData": { "preLogin": false, "userGrade": { "primary": [], "middle": [], "senior": [] }, "userType": [] }, "propsData": { "0": { "description": { "bgUrl": [{}] }, "actions": [], "style": { "paddingTop": 0, "paddingBottom": 0 } } }, "pageDots": [{ "uniqueKey": "pageShowUniqueKey", "name": "页面", "imgUrl": "", "itemList": [{ "code": "F1003733_0_1", "triggerTiming": 1, "pointSatus": 2 }, { "code": "F1003733_0_8", "triggerTiming": 8, "pointSatus": 2 }, { "code": "F1003733_0_7", "triggerTiming": 7, "pointSatus": 2 }] }, { "uniqueKey": "745a0912 - 317d - 4a79 - a630 - 9fb061c5eef2", "name": "课程", "imgUrl": "", "itemList": [{ "code": "F1003733_745a0912 - 317d - 4a79 - a630 - 9fb061c5eef2_1", "triggerTiming": 1, "pointSatus": 2, "elementId": "745a0912 - 317d - 4a79 - a630 - 9fb061c5eef2" }, { "code": "F1003733_745a0912 - 317d - 4a79 - a630 - 9fb061c5eef2_2", "triggerTiming": 2, "pointSatus": 2, "desc": "点击课程uy0", "elementId": "745a0912 - 317d - 4a79 - a630 - 9fb061c5eef2" }] }, { "uniqueKey": "b1940048 - d672 - 4c19 - 8756 - b3e12bb9b7ee", "name": "课程", "imgUrl": "", "itemList": [{ "code": "F1003733_b1940048 - d672 - 4c19 - 8756 - b3e12bb9b7ee_1", "triggerTiming": 1, "pointSatus": 2, "elementId": "b1940048 - d672 - 4c19 - 8756 - b3e12bb9b7ee" }, { "code": "F1003733_b1940048 - d672 - 4c19 - 8756 - b3e12bb9b7ee_2", "triggerTiming": 2, "pointSatus": 2, "desc": "点击课程as0", "elementId": "b1940048 - d672 - 4c19 - 8756 - b3e12bb9b7ee" }] }, { "uniqueKey": "f3bb4e11 - 8217 - 4334 - 8fe8 - 7182bf95b169", "name": "按钮", "imgUrl": "", "itemList": [{ "code": "F1003733_f3bb4e11 - 8217 - 4334 - 8fe8 - 7182bf95b169_1", "triggerTiming": 1, "pointSatus": 2, "elementId": "f3bb4e11 - 8217 - 4334 - 8fe8 - 7182bf95b169" }, { "code": "F1003733_f3bb4e11 - 8217 - 4334 - 8fe8 - 7182bf95b169_2", "triggerTiming": 2, "pointSatus": 2, "desc": "点击按钮sm0", "elementId": "f3bb4e11 - 8217 - 4334 - 8fe8 - 7182bf95b169" }] }, { "uniqueKey": "ebcc63d1 - 8061 - 4fb6 - ac7b - 85692220e967", "name": "文本", "imgUrl": "", "itemList": [{ "code": "F1003733_ebcc63d1 - 8061 - 4fb6 - ac7b - 85692220e967_1", "triggerTiming": 1, "pointSatus": 2, "elementId": "ebcc63d1 - 8061 - 4fb6 - ac7b - 85692220e967" }] }] }

// let reg = /(\"|\')(skuId|linkValue|spuId)(\"|\'):(\"|\')?(\d{6,})(\"|\')?/ig
// let saveString = JSON.stringify(str)
// const group = saveString.match(reg)
// console.log(group);


// let result = group.map((item) => {
//   let arr = item.replace(/"|'/ig, '').split(':')
//   let type = 1;
//   switch (arr[0]) {
//     case 'skuId':
//     case 'linkValue':
//       type = 1;
//       break;

//     case 'spuId':
//       type = 2;
//       break;
//   }

//   return {
//     type,
//     value: arr[1]
//   }
// })
// console.log(result);

// let result2 = Array.from(new Set(result))
// console.log(result2);


const reg = /(file:\/\/\/.*)\/([^ /]*)\/([^/]*)-\w{8}-hycache\.html(.*)/
const baidu = encodeURIComponent('http://www.baidu.com?name=1')

const str = `file:///var/mobile/Containers/Data/Application/45B7B9A7-50DE-429C-AB0E-DB822AC01218/Documents/hybrid_cache/webHtmlPath/kid-main-app/home-eb0978d1-hycache.html?zybhost=1&returnurl=${baidu}`

const re = str.match(reg)

console.log(re);
console.log(re[1]);
console.log(re[2])
console.log(re[3])

// function getLocationHref() {
//   const { href } = window.location
//   //file：协议
//   if (href.startsWith('file:')) {
//     const reg = /file:\/\/\/.*\/([^/]*)\/([^/]*)-\w{8}-hycache\.html(.*)/
//     const re = href.match(reg)
//     console.log(re);

//     const moduleName = re[1]
//     const pageName = re[2]
//     const query = reg[3]
//     return `/static/hy/${moduleName}/${pageName}.html${query}`
//   }

//   const { pathname, search } = window.location
//   return `${pathname}${search}`
// }



